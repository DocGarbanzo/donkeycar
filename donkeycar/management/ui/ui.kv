#:include common.kv
#:include tub_screen.kv
#:include pilot_screen.kv
#:include train_screen.kv
#:include car_screen.kv


<TabBar>:
    size_hint_y: None
    height: common_height + 40
    padding: [20, 20]
    spacing: 20
    canvas.before:
        Color:
            rgba: 0.25, 0.138, 0.0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        id: tub_btn
        text: 'Tub Manager'
        on_release:
            root.manager.current_screen.keys_enabled = False
            root.manager.current = 'tub'
            root.manager.current_screen.keys_enabled = True
            root.manager.current_screen.ids.tab_bar.disable_only(root.manager.current_screen.name)
    Button:
        id: train_btn
        text: 'Trainer'
        on_release:
            root.manager.current_screen.keys_enabled = False
            root.manager.current = 'train'
            root.manager.current_screen.keys_enabled = True
            root.manager.current_screen.ids.tab_bar.disable_only(root.manager.current_screen.name)
    Button:
        id: pilot_btn
        text: 'Pilot Arena'
        on_release:
            root.manager.current_screen.keys_enabled = False
            root.manager.current = 'pilot'
            root.manager.current_screen.keys_enabled = True
            if not root.manager.current_screen.index: root.manager.current_screen.index = 0
            root.manager.current_screen.ids.tab_bar.disable_only(root.manager.current_screen.name)
    Button:
        id: car_btn
        text: 'Car Connector'
        on_release:
            root.manager.current_screen.keys_enabled = False
            root.manager.current = 'car'
            root.manager.current_screen.keys_enabled = True
            root.manager.current_screen.ids.tab_bar.disable_only(root.manager.current_screen.name)
            root.manager.current_screen.update_pilots()


<StartScreen>:
    BoxLayout:
        orientation: 'vertical'
        TabBar:
            id: tab_bar
            manager: root.manager
        Image:
            source: root.img_path
            size: self.texture_size
