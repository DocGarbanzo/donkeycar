
#:include common.kv
#:include tub_screen1.kv
#:include train_screen.kv
#:include pilot_screen.kv
#:include car_screen.kv

<StartScreen>:
    BoxLayout:
        padding: 10
        orientation: 'vertical'
        Image:
            source: root.img_path
            size: self.texture_size


BoxLayout:
    orientation: 'vertical'
    ActionView:
        id: av
        size_hint_y: None
        height: 20

        ActionPrevious:
            with_previous: False
            app_icon: ''
            size_hint_x: None
            width: 0
        ActionButton:
            id: tub_btn
            text: 'Tub Manager'
            on_release:
                sm.current = 'tub'
                sm.current_screen.bind_keyboard()
        ActionButton:
            id: train_btn
            text: 'Trainer'
            on_release:
                sm.current = 'train'
                sm.current_screen.bind_keyboard()
        ActionButton:
            id: pilot_btn
            text: 'Pilot Arena'
            on_release:
                sm.current = 'pilot'
                # TODO: enable
                # if not sm.current_screen.index: sm.current_screen.index = 0
                sm.current_screen.bind_keyboard()
        ActionButton:
            id: car_btn
            text: 'Car Connector'
            on_release:
                sm.current = 'car'
                sm.current_screen.update_pilots()
                sm.current_screen.bind_keyboard()
        ActionButton:
            text: 'Settings'
            on_press: app.open_settings()
        ActionButton:
            text: 'Quit'
            on_press: app.get_running_app().stop()

    ScreenManager:
        id: sm
        StartScreen:
            id: start_screen
            name: 'start'
        TubScreen:
            id: tub_screen
            name: 'tub'
        TrainScreen:
            id: train_screen
            name: 'train'
        PilotScreen:
            id: pilot_screen
            name: 'pilot'
        CarScreen:
            id: car_screen
            name: 'car'

    StatusLabel:
        id: status
        text: "Donkey ready"